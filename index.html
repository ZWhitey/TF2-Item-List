<!DOCTYPE html>
<html>

<head>
    <title>Item Name</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="./js/table_data.js"></script>
    <script src="./js/paint.js"></script>
    <script src="./js/my_func.js"></script>
</head>
<script>
    var en_data = [-1, -1, -1, -1, -1];
    var tw_data = [-1, -1, -1, -1, -1];
    var en_unusual = null;
    var tw_unusual = null;
    var en = [];
    var tw = [];
    var data_conut = 0;
    var item_data;
    $(function () {
        $("#Input").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#table tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
        $.when($.getJSON("./item_data/en_1.json"),
            $.getJSON("./item_data/en_2.json"),
            $.getJSON("./item_data/en_3.json"),
            $.getJSON("./item_data/en_4.json"),
            $.getJSON("./item_data/en_5.json"),
            $.getJSON(`./item_data/zh-TW_1.json`),
            $.getJSON(`./item_data/zh-TW_2.json`),
            $.getJSON(`./item_data/zh-TW_3.json`),
            $.getJSON(`./item_data/zh-TW_4.json`),
            $.getJSON(`./item_data/zh-TW_5.json`),
            $.getJSON(`./item_data/en_schema.json`),
            $.getJSON(`./item_data/zh-tw_schema.json`)

        ).done(function (en1, en2, en3, en4, en5, tw1, tw2, tw3, tw4, tw5, ens, tws) {
            tw = tw1[0]['result']['items'];
            tw = tw.concat(tw2[0]['result']['items']);
            tw = tw.concat(tw3[0]['result']['items']);
            tw = tw.concat(tw4[0]['result']['items']);
            tw = tw.concat(tw5[0]['result']['items']);
            en = en1[0]['result']['items'];
            en = en.concat(en2[0]['result']['items']);
            en = en.concat(en3[0]['result']['items']);
            en = en.concat(en4[0]['result']['items']);
            en = en.concat(en5[0]['result']['items']);
            en_unusual = ens[0]['result']['attribute_controlled_attached_particles'];
            tw_unusual = tws[0]['result']['attribute_controlled_attached_particles'];
            item_data = new Data(en, tw, en_unusual, tw_unusual, 'table', 'u_table', 'p_table');

            updateItemTable(0);
            item_data.updatePaintTable();
            item_data.updateUnusualtable();
        });
    });
</script>

<body>
    <div class="jumbotron">
        <h1>Team Fortress 2 Item List</h1>
    </div>
    <div class="container">

        <ul class="nav nav-tabs">
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#Item">Item List</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#menu1">Unusual</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#menu2">Paint Can</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#menu3">Metal Calculator</a>
            </li>
        </ul>
        <div class="tab-content">
            <div id="Item" class="tab-pane active container"><br>
                <br>
                <input type="text" id="Input">
                <div class="clusterize">
                    <table class="table table-hover table-sm">
                        <thead>
                            <tr class="d-flex">
                                <th class="col-1">Index</th>
                                <th class="col-3">Name(en)</th>
                                <th class="col-3">Name(zh-TW)</th>
                                <th class="col-3">Class</th>
                                <th class="col-2">Item Class</th>
                            </tr>
                        </thead>
                        <tbody id="table">
                        </tbody>
                    </table>
                        <ul class="pagination justify-content-center">
                          <li class="page-item disabled">
                            <a class="page-link" href="#" aria-label="Previous">
                              <span aria-hidden="true">&laquo;</span>
                              <span class="sr-only">Previous</span>
                            </a>
                          </li>
                          <li class="page-item active"><a class="page-link" href="#">1</a></li>
                          <li class="page-item"><a class="page-link" href="#">2</a></li>
                          <li class="page-item"><a class="page-link" href="#">3</a></li>
                          <li class="page-item">
                            <a class="page-link" href="#" aria-label="Next">
                              <span aria-hidden="true">&raquo;</span>
                              <span class="sr-only">Next</span>
                            </a>
                          </li>
                        </ul>
                </div>
            </div>
            <div id="menu1" class="tab-pane fade container"><br>
                <table class="table table-hover table-sm">
                    <thead>
                        <tr>
                            <th>Index</th>
                            <th>Name(en)</th>
                            <th>Name(zh-TW)</th>
                            <th>Particle Name</th>
                        </tr>
                    </thead>
                    <tbody id="u_table">
                    </tbody>
                </table>
            </div>
            <div id="menu2" class="tab-pane fade container"><br>
                <table class="table table-hover table-sm">
                    <thead>
                        <tr>
                            <th>Index</th>
                            <th>Name(en)</th>
                            <th>Name(zh-TW)</th>
                            <th>Color Code (Red)</th>
                            <th>Color Code (Blue)</th>
                        </tr>
                    </thead>
                    <tbody id="p_table">
                    </tbody>
                </table>
            </div>
            <div id="menu3" class="tab-pane fade container"><br>
                <h3>Metal Calculator</h3>
                <div class="row">
                    <div class="col-lg-4">
                        <label for="cal_input">Price:</label>
                        <textarea class="form-control" rows="20" id="cal_input" onchange="update()"></textarea>
                    </div>
                    <div class="col-lg-8">
                        <h3 id="c_ref">Refine Metal : 0</h3>
                        <h3 id="c_rec">Reclaimed Metal : 0</h3>
                        <h3 id="c_scrap">Scrap Metal : 0</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>